<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel do Garçom</title>
  <style>
    .pedido-pronto {
      background-color: #d4edda;
      border: 2px solid #28a745;
      padding: 10px;
      margin: 5px 0;
      animation: piscar 1s infinite;
    }

    @keyframes piscar {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <h1>Painel do Garçom</h1>
  <div id="pedidos"></div>

  <audio id="alertaAudio" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>

  <script>
    let pedidosAnteriores = [];

    function carregarPedidos() {
      fetch('pedidos.json') // caminho para o arquivo onde os pedidos são salvos
        .then(response => response.json())
        .then(pedidos => {
          const container = document.getElementById('pedidos');
          container.innerHTML = '';

          pedidos.forEach(pedido => {
            const div = document.createElement('div');
            div.innerHTML = `Mesa ${pedido.mesa}: ${pedido.item} - <strong>${pedido.status}</strong>`;

            if (pedido.status === 'pronto') {
              div.classList.add('pedido-pronto');

              // Se o pedido não estava pronto antes, tocar som
              const anterior = pedidosAnteriores.find(p => p.id === pedido.id);
              if (!anterior || anterior.status !== 'pronto') {
                document.getElementById('alertaAudio').play();
              }
            }

            container.appendChild(div);
          });

          pedidosAnteriores = pedidos;
        });
    }

    setInterval(carregarPedidos, 3000); // Verifica a cada 3 segundos
    carregarPedidos(); // primeira chamada
  </script>
</body>
</html>